FROM node:22-alpine

WORKDIR /app

# Copy everything
COPY . .

# Install ALL dependencies from root (this links workspaces)
RUN npm install

# Move to MCP server directory
WORKDIR /app/packages/mcp-server

# Expose port
EXPOSE 3002

# Run with npx tsx
CMD ["npx", "tsx", "src/http-server.ts"]
